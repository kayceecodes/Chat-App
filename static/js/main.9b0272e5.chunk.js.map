{"version":3,"sources":["components/colorpanel/ColorPanel.module.scss","components/auth/login/Login.module.scss","components/auth/register/Register.module.scss","components/sidepanel/SidePanel.module.scss","components/metapanel/MetaPanel.module.scss","components/messages/messageform/MessageForm.module.scss","components/messages/Messages.module.scss","serviceWorker.ts","ComponentType.tsx","store/actions/setCurrentChannel.tsx","store/actions/actionTypes.tsx","store/actions/setPrivateChannel.tsx","store/actions/setColors.tsx","components/colorpanel/ColorPanel.tsx","firebase.tsx","components/sidepanel/userpanel/UserPanel.tsx","components/sidepanel/channels/Channels.tsx","components/sidepanel/directmessages/DirectMessages.tsx","components/sidepanel/starred/Starred.tsx","components/sidepanel/SidePanel.tsx","components/metapanel/MetaPanel.tsx","components/messages/progressbar/ProgressBar.tsx","components/messages/messageform/filemodal/FileModal.tsx","components/messages/messageform/MessageForm.tsx","components/messages/messagesheader/MessagesHeader.tsx","components/messages/message/Message.tsx","components/messages/Messages.tsx","store/actions/setUserPosts.tsx","components/App.tsx","components/auth/login/Login.tsx","components/auth/register/Register.tsx","components/ui/spinner/Spinner.tsx","store/reducers/user_reducer.tsx","store/reducers/channel_reducer.tsx","store/reducers/colors_reducer.tsx","store/reducers/index.tsx","index.tsx","store/actions/setUser.tsx"],"names":["module","exports","Boolean","window","location","hostname","match","ComponentType","React","Component","setCurrentChannel","channel","type","payload","currentChannel","setPrivateChannel","isPrivateChannel","setColors","primaryColor","secondaryColor","ColorPanel","state","modal","primary","secondary","user","props","currentUser","usersRef","firebase","database","ref","userColors","addListener","userId","child","on","snap","unshift","val","setState","handleChangePrimary","color","hex","handleChangeSecondary","handleSaveColors","saveColors","uid","push","update","then","console","log","closeModal","catch","err","error","displayUserColors","colors","length","map","i","Fragment","key","Divider","className","classes","color__container","onClick","color__square","style","background","color__overlay","openModal","this","Sidebar","as","Menu","inverted","vertical","visible","width","Button","icon","size","backgroundColor","Modal","basic","open","onClose","Header","Content","Segment","Label","content","onChange","Actions","Icon","name","connect","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","UserPanel","dropdownOptions","text","displayName","disabled","handleSignout","auth","signOut","Grid","Column","Row","padding","margin","floated","Dropdown","trigger","Image","space","avatar","src","photoURL","options","Channels","id","channels","channelName","channelDetails","channelsRef","messagesRef","notifications","total","lastKnownTotal","count","isModalOpen","firstLoad","activeChannel","removeListeners","off","setFirstChannel","firstChannel","setActiveChannel","changeChannel","clearNotifications","index","findIndex","notification","updatedNotifications","addNotificationListener","channelId","handleNotifications","currentChannelId","lastTotal","numChildren","getNotificationCount","forEach","displayChannels","Item","opacity","active","addChannel","newChannel","details","createdBy","handleSubmit","event","preventDefault","isFormValid","handleChange","currentTarget","value","addListenters","loadedChannels","Form","onSubmit","Field","Input","fluid","label","DirectMessages","users","connectedRef","presenceRef","addListeners","currentUserUid","loadedUsers","set","onDisconnect","remove","addStatusToUser","connected","updatedUsers","reduce","acc","concat","isUserOnline","status","channelData","getChannelId","currentUserId","fontStyle","Starred","starredChannels","starredChannel","channelToRemove","filteredChannels","filter","SidePanel","slidePanelContainer","fixed","fontSize","MetaPanel","activeIndex","privateChannel","userPosts","formatCount","num","displayTopPosters","posts","Object","entries","sort","a","b","List","Description","slice","setActiveIndex","titleProps","newIndex","loading","metaPanel","attached","Accordion","styled","Title","circular","ProgressBar","uploadState","percentUploaded","Progress","styles","progressBar","percent","progress","indicating","FileModal","file","authorized","addFile","files","sendFile","uploadFile","isAuthorized","contentType","mime","lookup","clearFile","filename","includes","MessageForm","storageRef","storage","uploadTask","message","errors","createMessage","fileUrl","timestamp","ServerValue","TIMESTAMP","image","sendMessage","getMessagesRef","getPath","metadata","pathToUpload","filePath","uuidv4","put","Math","round","bytesTransferred","totalBytes","snapshot","getDownloadURL","downloadUrl","sendFileMessage","messageForm","marginBottom","labelPosition","placeholder","some","Group","widths","MessagesHeader","numUniqueUsers","handleSearchChange","searchLoading","isChannelStarred","handleStar","clearing","Subheader","isOwnMessage","Message","Comment","Avatar","Author","Metadata","moment","fromNow","isImage","Text","Messages","privateMessagesRef","messages","messagesLoading","searchTerm","searchResults","addUserStarsListener","once","data","prevStarred","keys","addMessageListener","loadedMessages","countUniqueUsers","countUserPosts","prevState","starChannel","createBy","handleSearchMessages","channelMessages","regex","RegExp","setTimeout","uniqueUsers","plural","setUserPosts","displayMessages","displayChannelName","maxWidth","columns","height","marginLeft","Login","email","password","displayErrors","signInWithEmailAndPassword","signedInUser","credentials","handleInputError","inputName","toLowerCase","textAlign","verticalAlign","register","data-test","loginHeader","formContainer","to","Register","username","passwordConfirmation","createUserWithEmailAndPassword","createdUser","updateProfile","md5","saveUser","isFormEmpty","isPasswordValid","form","Spinner","Dimmer","Loader","initialUserState","isLoading","user_reducer","action","initialChannelState","channel_reducer","initialColorsState","colors_reducer","rootReducer","combineReducers","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","middlewares","thunk","store","createStore","applyMiddleware","Root","onAuthStateChanged","setUser","history","clearUser","exact","path","component","App","RootWithAuth","withRouter","document","getElementById","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.9b0272e5.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"color__container\":\"ColorPanel_color__container__37qmW\",\"color__square\":\"ColorPanel_color__square__KOsql\",\"color__overlay\":\"ColorPanel_color__overlay__mSirA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"register\":\"Login_register__3qUGI\",\"formContainer\":\"Login_formContainer__1y_UU\",\"loginHeader\":\"Login_loginHeader__2iYtq\",\"uiMessage\":\"Login_uiMessage__17kZN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"register\":\"Register_register__1DUPd\",\"formContainer\":\"Register_formContainer__39alA\",\"loginHeader\":\"Register_loginHeader__175oy\",\"uiMessage\":\"Register_uiMessage__2kSqb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"slidePanelContainer\":\"SidePanel_slidePanelContainer__7_4G6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"metaPanel\":\"MetaPanel_metaPanel__3zj9J\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"messageForm\":\"MessageForm_messageForm__2j8uN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"messages\":\"Messages_messages__1SjP7\",\"comment\":\"Messages_comment__2S6eZ\",\"messages__segmentWrapper\":\"Messages_messages__segmentWrapper__3qi2r\"};","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\n\n\nexport type FormEvent = React.FormEvent<HTMLFormElement>;\nexport type InputEvent = React.FormEvent<HTMLInputElement>;\n\n\n\nexport default class ComponentType<P = any, S = any> extends React.Component<P, S> {    \n\n}\n\n","import * as actionTypes from './actionTypes';\n\n\nexport interface IChannel {\n    type:string,\n    payload:{currentChannel:{channel:object}}\n}\n\nexport const setCurrentChannel = (channel:any) => {\n    return {\n        type:actionTypes.SET_CURRENT_CHANNEL,\n        payload:{\n            currentChannel: channel\n        }\n    }\n}","export interface IActions {\n  type: string;\n}\n// USER TYPES\nexport const SET_USER = 'SET_USER';\n\nexport const CLEAR_USER = 'CLEAR_USER';\n\n// Channel TYPES\nexport const SET_CURRENT_CHANNEL = 'SET_CURRENT_CHANNEL';\n\n// Private Channels CALLED in DirectMessages.tsx / changeChannel()\nexport const SET_PRIVATE_CHANNEL = 'SET_PRIVATE_CHANNEL';\n\nexport const SET_USER_POSTS = 'SET_USER_POSTS';\n\n// Color Action Types\nexport const SET_COLORS = 'SET_COLORS';","import * as actionTypes from './actionTypes';\n\nexport const setPrivateChannel = (isPrivateChannel: boolean) => {\n    return {\n        type: actionTypes.SET_PRIVATE_CHANNEL,\n        payload: {\n            isPrivateChannel\n        }\n    }\n}","import * as actionTypes from './actionTypes';\nimport {IColors} from '../../components/colorpanel/ColorPanel';\n\nexport const setColors = (primaryColor: IColors, secondaryColor:IColors) => {\n    return {\n        type: actionTypes.SET_COLORS,\n        payload: {\n            primaryColor,\n            secondaryColor\n        }\n    }\n}\n\nexport default setColors;","import React from 'react';\nimport { Label, Sidebar, Menu, Divider, Button, Modal, Icon, Segment } from 'semantic-ui-react';\nimport { SliderPicker } from 'react-color';\nimport firebase from 'firebase';\nimport ComponentType from '../../ComponentType';\nimport classes from './ColorPanel.module.scss';\nimport {connect} from 'react-redux';\nimport {setColors} from '../../store/actions/index';\n\nexport interface IColors {\n  primary: string,\n  secondary: string\n}\n\ninterface IProps {\n  currentUser: any,\n  setColors: (primary:IColors, secondary:IColors) => any\n}\n\nclass ColorPanel extends ComponentType<IProps> {\n  state = {\n    modal: false,\n    primary: '',\n    secondary: '',\n    user: this.props.currentUser,\n    usersRef: firebase.database().ref('users'),\n    userColors: []\n  }\n\n  componentDidMount() {\n    if(this.state.user) {\n      this.addListener(this.state.user.uid);\n    }\n  }\n\n  addListener = (userId: number) => {\n    let userColors: Array<string> = [];\n    this.state.usersRef\n      .child(`${userId}/colors`)\n      .on('child_added', snap => {\n        userColors.unshift(snap.val());\n        this.setState({userColors});\n      });\n  }\n\n  handleChangePrimary = (color: any) => this.setState({primary: color.hex});\n  handleChangeSecondary = (color: any) => this.setState({secondary: color.hex});\n\n  handleSaveColors = () => {\n    if(this.state.primary && this.state.secondary) {\n      this.saveColors(this.state.primary, this.state.secondary); \n    }\n  }\n  \n  saveColors = (primary:string, secondary:string) => {\n    this.state.usersRef\n      .child(`${this.state.user.uid}/colors`)\n      .push()\n      .update({\n        primary,\n        secondary\n      })\n      .then(() => {\n        console.log('Colors added');\n        this.closeModal(); \n      })\n      .catch( (err) => console.error(err));\n  } \n\n  displayUserColors = (colors: IColors[]) => (\n    colors.length > 0 && colors.map((color:any, i: number) => (\n      <React.Fragment key={i}>\n        <Divider />\n        <div \n            className={classes.color__container} \n            onClick={() => this.props.setColors(color.primary, color.secondary)}\n             \n        >\n          <div className={classes.color__square} style={{background: color.primary}}>\n            <div className={classes.color__overlay} style={{background: color.secondary}}></div>\n          </div>\n        </div>\n      </React.Fragment>\n    ))\n  )\n\n  openModal = () => this.setState({modal: true});\n\n  closeModal = () => this.setState({modal: false});\n\n    render() {\n        let {modal, primary, secondary, userColors} = this.state;\n\n        return (\n            <Sidebar\n              as={Menu}\n              // icon='label'\n              inverted\n              vertical\n              visible\n              width='very thin'\n            >\n              <Divider />\n            \n              <Button icon='add' size='small' style={{backgroundColor: '#00ada5'}} onClick={this.openModal} />\n              {this.displayUserColors(userColors)}\n              <Modal basic open={modal} onClose={this.closeModal}>\n                <Modal.Header>\n                  <Modal.Content>\n                    \n                      <Segment inverted  >\n                        <Label content= 'Primary Color' />\n                        <SliderPicker color={primary} onChange={this.handleChangePrimary} />\n                      </Segment>\n                      <Segment inverted  >\n                        <Label content='Secondary Color' />\n                        <SliderPicker color={secondary} onChange={this.handleChangeSecondary} />\n                      </Segment>\n\n                  </Modal.Content>\n                  \n                  <Modal.Actions>\n                    <Button color='green' inverted  onClick={this.handleSaveColors}>\n                       <Icon name='checkmark' /> Save Colors\n                    </Button>\n                    <Button color='red' onClick={this.closeModal} inverted>\n                       <Icon name='remove'  /> Cancel\n                    </Button>\n                  </Modal.Actions>\n                </Modal.Header>\n              </Modal>\n            </Sidebar>\n        )\n    }\n}\n\n\nexport default connect(null,{setColors})(ColorPanel);","import firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/database';  \nimport 'firebase/storage';\n\nvar config = {\n    apiKey: \"AIzaSyAuyuNcunURGGkny2xJ0VDcXOc5k2kohcg\",\n    authDomain: \"slack-app-d47b6.firebaseapp.com\",\n    databaseURL: \"https://slack-app-d47b6.firebaseio.com\",\n    projectId: \"slack-app-d47b6\",\n    storageBucket: \"slack-app-d47b6.appspot.com\",\n    messagingSenderId: \"539859022252\"\n  };\n\nfirebase.initializeApp(config);\n\nexport default firebase;\n\n// == SERVICE STORAGE ==\n\n// service firebase.storage {\n//   match /b/{bucket}/o {\n//     match /{allPaths=**} {\n//       allow read, write: if request.auth != null;\n//     }\n//   }\n// }","import React from \"react\";\nimport { Grid, Header, Icon, Dropdown, Image } from \"semantic-ui-react\";\nimport { connect } from \"react-redux\";\nimport firebase from \"../../../firebase\";\n// import styles from \"./UserPanel.module.scss\";\nimport \"./UserPanel.scss\";\nimport { IColors } from \"../../colorpanel/ColorPanel\";\n\nexport interface Store extends React.Props<any> {\n  store?: any;\n}\n\ninterface Props {\n  currentUser: {\n    displayName: string;\n    photoURL: string;\n  },\n  primaryColor: IColors\n}\n\nclass UserPanel extends React.Component<Props> {\n  state = {\n    user: this.props.currentUser\n  };\n  componentDidMount() {\n    this.setState({ user: this.props.currentUser });\n\n  }\n\n  dropdownOptions = () => [\n    {\n      key: \"user\",\n      text: (\n        <span>\n          {\" \"}\n          Signed in as<strong>{this.props.currentUser.displayName}</strong>\n        </span>\n      ),\n      disabled: true\n    },\n    {\n      key: \"avatar\",\n      text: <span>Change Avatar</span>\n    },\n    {\n      key: \"signout\",\n      text: <span onClick={this.handleSignout}>Sign Out</span>\n    }\n  ];\n\n  handleSignout = () => {\n    firebase\n      .auth()\n      .signOut()\n      .then(() => console.log(\"signed out!\"));\n  };\n  render() {\n    console.log(this.props.currentUser);\n    const { user } = this.state;\n    const { primaryColor } = this.props;\n    return (\n      <Grid style={{ background: primaryColor }}>\n        <Grid.Column>\n          <Grid.Column>\n            <Grid.Row style={{ padding: \"1.2em\", margin: 0 }}>\n              {/* App Header */}\n              <Header inverted floated=\"left\" as=\"h2\">\n                <Icon name=\"code\" />\n                <Header.Content>DevChat</Header.Content>\n              </Header>\n              \n              {/* User Dropdown */}\n              <Header style={{ padding: \"0.25em\" }} as=\"h4\" inverted />\n              <Dropdown\n                trigger={\n                  <span style={{ color: \"white\" }}>\n                  <br />\n                    <Image space=\"right\" avatar src={user.photoURL}   />\n                    {this.state.user.displayName}\n                  </span>\n                }\n                options={this.dropdownOptions()}\n              />\n            </Grid.Row>\n          </Grid.Column>\n        </Grid.Column>\n      </Grid>\n    );\n  }\n}\n\nconst mapStateToProps = (state: any): any => ({\n  currentUser: state.user.currentUser\n});\n\nexport default connect(mapStateToProps)(UserPanel);\n\n// === LEFT OFF 3:34 ======\n","import React from 'react'; \nimport { Menu, Icon, Modal, Input, Button, Label, Form } from 'semantic-ui-react';\nimport firebase from '../../../firebase';\n\nimport {setCurrentChannel, setPrivateChannel} from '../../../store/actions';\nimport {connect} from 'react-redux';\n\n\ntype InputEvent = React.FormEvent<HTMLInputElement>;\ntype FormEvent = React.FormEvent<HTMLFormElement>;\ntype User = {displayName:string, photoURL:string};\ntype Notification = {\n  id: number,\n  total: number,\n  lastKnownTotal: number,\n  count: number,\n}\n\nexport interface Channel {id:number, name:string};\n\nexport interface INewChannel {\n    id: string,\n    name: string,\n    details: string,\n    createdBy: {\n        name: string,\n        avatar: string\n    }\n}\n\ninterface IState {\n        user:User,\n        channel:Channel,\n        channels: any,\n        channelName: string,\n        channelDetails: string,\n        isModalOpen: boolean,\n        channelsRef: any,\n        messagesRef: any,\n        notifications:[Notification],\n        firstLoad: boolean,\n        activeChannel: string\n}\n\ninterface IProps {\n    currentUser:User,\n    changeChannel?:(channel:object) => void,\n    setCurrentChannel?:any,\n    setActiveChannel?:() => void,\n    setPrivateChannel?:any,\n}\n\nclass Channels extends React.Component<IProps> {\n    state:IState = {\n        user: this.props.currentUser,\n        channel: {id:0, name: ''},\n        channels: [], // ?????????? ---- COULD CAUSE PROBLEMS IN CHANNEL SWITCHING //\n        channelName: '',\n        channelDetails: '',\n        channelsRef: firebase.database().ref('channels'),\n        messagesRef: firebase.database().ref('messages'),\n        notifications: [{id: 0, total: 0, lastKnownTotal: 0, count: 0}],\n        isModalOpen:false,\n        firstLoad: true,\n        activeChannel: '',\n    }\n    componentWillMount() {\n        this.addListenters();\n        console.log(\"CHANNELS -> State channels: \", this.state.channels);\n    }\n\n    componentWillUnmount() {\n        this.removeListeners();\n    }\n\n    addListenters() {\n        let loadedChannels:Array<object> = [];  \n        this.state.channelsRef.on('child_added', (snap:{val:()=>object, key:number}) =>{\n            loadedChannels.push( snap.val() );\n            this.setState({channels: loadedChannels}, () => this.setFirstChannel());\n            this.addNotificationListener(snap.key);\n        });\n    }\n\n    removeListeners = ():void => {\n        this.state.channelsRef.off();\n    }\n///////////////////////////\n    setFirstChannel = () => {\n        const firstChannel = this.state.channels[0];\n        if(this.state.firstLoad && this.state.channels.length > 0) {\n            this.props.setCurrentChannel(firstChannel);\n            this.setActiveChannel(firstChannel) ;\n        }\n        this.setState({firstLoad: false});\n    }\n//////////////////////////////\n    changeChannel = (channel:Channel) => {\n        this.props.setCurrentChannel(channel);\n        this.clearNotifications();\n        this.setActiveChannel(channel);\n        this.props.setPrivateChannel(false);\n        this.setState({ channel });\n    }\n\n    clearNotifications = () => {\n      \n      let index = this.state.notifications.findIndex((notification:{id:number}) => notification.id ===\n        this.state.channel.id);\n      \n        if(index !== -1) {\n          let updatedNotifications = [...this.state.notifications];\n          updatedNotifications[index].total = this.state.notifications[index].lastKnownTotal;\n          updatedNotifications[index].count = 0;\n          this.setState({ notifications: updatedNotifications});\n        }\n    }\n\n    addNotificationListener = (channelId:number) => {\n      this.state.messagesRef.child(channelId).on('value', (snap:any) => {\n        if(this.state.channel) {\n          this.handleNotifications(channelId, this.state.channel.id, this.state.notifications,snap)\n        }\n      })\n    }  \n    \n    handleNotifications = (channelId: number, currentChannelId: any, notifications:any, snap:any) => {\n      let lastTotal = 0;\n\n      let index = notifications.findIndex((notification:{id:number}) => notification.id === channelId);\n    \n      if(index !== -1) {\n        if(channelId !== currentChannelId) {\n          lastTotal = notifications[index].total;\n          if(snap.numChildren() - lastTotal > 0) {\n            notifications[index].count = snap.numChildren() - lastTotal;\n          }\n        }\n        notifications[index].lastKnownTotal = snap.numChildren();\n      } else {\n        notifications.push({\n          id: channelId,\n          total: snap.numChildren(),\n          lastKnownTotal:snap.numChildren(),\n          count: 0\n        });\n      }\n      this.setState({notifications});\n    } \n\n   setActiveChannel = (channel:Channel) =>  this.setState({activeChannel: channel.id})\n\n   getNotificationCount = (channel:Channel) => {\n     let count = 0;\n\n     this.state.notifications.forEach((notification:{id:number, count:number}) => {\n       if(notification.id === channel.id) {\n         count = notification.count;\n       }\n     });\n     if(count > 0) return count;\n   }\n\n    displayChannels = (channels:[object]) => (\n        channels.length > 0 && channels.map( (channel:any) => (\n            <Menu.Item\n                key={channel.id+channel.name}\n                onClick={() => this.changeChannel(channel)}\n                name={channel.name}\n                style={{opacity:0.95}}\n                active={channel.id === this.state.activeChannel}\n            >\n              {this.getNotificationCount(channel) && \n               (<Label color='red'>{this.getNotificationCount(channel)}</Label>)}\n                # {channel.name}\n\n            </Menu.Item>\n        ))\n    )\n    /*Add */\n    addChannel = () => {\n        const {channelsRef, channelName, channelDetails, user} = this.state;\n        // console.log('CHANNELREF.KEY: ', channelsRef.key);\n        console.log('Firebase Database Ref: ', channelsRef);\n        const key = channelsRef.push().key;\n        // console.log('CONSOLE LOG KEY: ', key);\n        console.log('USERNAME: ', user);\n        const newChannel = {\n            id:key,\n            name:channelName,\n            details: channelDetails,\n            createdBy: {\n                name: user.displayName,\n                avatar: user.photoURL\n            }\n        }\n        channelsRef\n            .child(key)\n            .update(newChannel)\n            .then(() => {\n                this.setState({channelName: '', channelDetails: ''});\n                this.closeModal();\n                console.log('channel added');\n            })\n            .catch( (error:Error) => {\n                console.log('Catched Error:', error);\n            })\n    }\n\n    handleSubmit = (event:FormEvent) => {\n        event.preventDefault();\n        if(this.isFormValid(this.state)) {\n            this.addChannel();\n            console.log('channel added');\n        }\n    }\n    openModal = () => this.setState({ isModalOpen: true });\n\n    closeModal = () => this.setState({isModalOpen: false});\n    \n    handleChange = (event:InputEvent) => {\n        this.setState({ [event.currentTarget.name]: event.currentTarget.value})\n    }\n\n    isFormValid = ({channelName, channelDetails}:IState) => channelName && channelDetails;\n    render() {\n\n        let {channels, isModalOpen} = this.state;\n        return (\n        <React.Fragment>\n        <Menu.Menu className=\"menu\">\n          <Menu.Item>\n            <span>\n              <Icon name=\"exchange\" /> CHANNELS\n            </span>{\" \"}\n            ({channels.length}) <Icon name=\"add\" onClick={this.openModal} />\n          </Menu.Item>\n          {this.displayChannels(channels)}\n        </Menu.Menu>\n\n        {/* Add Channel Modal */}\n        <Modal basic open={isModalOpen} onClose={this.closeModal}>\n          <Modal.Header>Add a Channel</Modal.Header>\n          <Modal.Content>\n            <Form onSubmit={this.handleSubmit}>\n              <Form.Field>\n                <Input\n                  fluid\n                  label=\"Name of Channel\"\n                  name=\"channelName\"\n                  onChange={this.handleChange}\n                />\n              </Form.Field>\n\n              <Form.Field>\n                <Input\n                  fluid\n                  label=\"About the Channel\"\n                  name=\"channelDetails\"\n                  onChange={this.handleChange}\n                />\n              </Form.Field>\n            </Form>\n          </Modal.Content>\n\n          <Modal.Actions>\n            <Button color=\"green\" inverted onClick={this.handleSubmit}>\n              <Icon name=\"checkmark\" /> Add\n            </Button>\n            <Button color=\"red\" inverted onClick={this.closeModal}>\n              <Icon name=\"remove\" /> Cancel\n            </Button>\n          </Modal.Actions>\n        </Modal>\n      </React.Fragment>\n        )\n    }\n}\n\n\nexport default connect<any, any>(\n    null,\n    { setCurrentChannel, setPrivateChannel }\n  )(Channels);\n  \n","import React from 'react';\nimport firebase from '../../../firebase';\nimport {Menu, Icon} from 'semantic-ui-react';\nimport ComponentType from '../../../ComponentType';\nimport {connect} from 'react-redux';\nimport {setCurrentChannel, setPrivateChannel} from '../../../store/actions';\nimport { any } from 'prop-types';\n\ntype UserType = {status: string, name: string, uid: string };\n\ninterface IProps {\n    currentUser:UserType,\n    setCurrentChannel?:any,\n    setPrivateChannel?:any,\n}\n\nclass DirectMessages extends ComponentType<IProps> {\n\n    state = {\n        activeChannel: '',\n        user: this.props.currentUser,\n        users: [], \n        usersRef: firebase.database().ref('users'),\n        connectedRef: firebase.database().ref('.info/connected'),\n        presenceRef: firebase.database().ref('presence')\n    }\n\n    componentDidMount() {\n        if(this.state.user) {\n            this.addListeners(this.state.user.uid);\n        }\n    }\n\n    addListeners = (currentUserUid:string) => {\n        let loadedUsers: Array<object> = [];\n        this.state.usersRef.on('child_added', (snap:any ) => {\n            if(currentUserUid !== snap.key) {\n                let user = snap.val();\n                user['uid'] = snap.key;\n                user['status'] = 'offline';\n                loadedUsers.push(user);\n                this.setState({users: loadedUsers});\n            }\n        })\n\n        this.state.connectedRef.on('value', snap => {\n            if(snap.val() === true) {\n                const ref = this.state.presenceRef.child(currentUserUid);\n                ref.set(true);\n                ref.onDisconnect().remove((err) => {\n\n                })\n            }\n        })\n\n        this.state.presenceRef.on('child_added', (snap: any) => {\n            if(currentUserUid !== snap.key) {\n                this.addStatusToUser(snap.key);\n            }\n        });\n        this.state.presenceRef.on('child_removed', (snap: any) => {\n            if(currentUserUid !== snap.key) {\n                this.addStatusToUser(snap.key, false);\n            }\n        });\n    }\n\n    addStatusToUser = ( userId: string, connected = true) => {\n        const updatedUsers = this.state.users.reduce((acc:any, user:{uid: string, status: string}) => {\n            if(user.uid === userId) {\n                user['status'] = `${connected ? 'online' : 'offline'}`;\n            }\n            return acc.concat(user);\n        }, []);\n        this.setState({users: updatedUsers});\n    }\n\n    isUserOnline = (user:UserType) => user.status === 'online'\n    \n    // Each user is still considered a channel, so here we use user id for reference to change channels\n    changeChannel = (user:UserType) => {\n        const channelId = this.getChannelId(user.uid);\n        const channelData = {\n            id: channelId,\n            name: user.name\n        }\n        this.props.setCurrentChannel(channelData);\n        this.props.setPrivateChannel(true);\n        this.setActiveChannel(user.uid);\n    }\n\n    getChannelId = (userId:string) => {\n        const currentUserId = this.state.user.uid;\n        return userId < currentUserId ?\n         `${userId}/${currentUserId}` : `${currentUserId}/${userId}`;\n    }\n\n    setActiveChannel = (userId: string) => {\n        this.setState({ activeChannel: userId });\n    }\n\n    render() {\n        const { users, activeChannel } = this.state;\n        return (\n            <Menu.Menu className='menu'>\n                <Menu.Item>\n                    <span>\n                        <Icon name='mail' /> DIRECT MESSAGES\n                    </span>{' '}\n                    ({ users.length })\n                </Menu.Item>\n                {/* Users to send Direct Messages */}\n                {users.map((user:UserType) => (\n                    <Menu.Item\n                        key={user.uid}\n                        active={user.uid === activeChannel}\n                        onClick={() => this.changeChannel(user)}\n                        style={{opacity: 0.95, fontStyle: 'italic'}}\n                    >\n                        <Icon \n                            name=\"circle\"\n                            color={this.isUserOnline(user) ? 'green' : 'red'}\n                        />\n                        @ {user.name}    \n                        </Menu.Item>\n                ))}\n            </Menu.Menu>\n        )\n    }\n}\nexport default connect<any, any>(null, {setCurrentChannel, setPrivateChannel})(DirectMessages);","import React from \"react\";\nimport { Menu, Icon } from \"semantic-ui-react\";\nimport { IChannel } from \"../../App\";\nimport { setPrivateChannel, setCurrentChannel } from \"../../../store/actions\";\nimport { connect } from \"react-redux\";\nimport firebase from \"../../../firebase\";\nimport ComponentType from '../../../ComponentType';\n\ninterface IProps {\n  setCurrentChannel: (channel: object) => any,\n  setPrivateChannel: (isPrivate: boolean) => any,\n  currentUser: any,\n}\n\nclass Starred extends ComponentType<IProps> {\n\n  state = {\n    starredChannels: [],\n    activeChannel: {},\n    openModal: false,\n    usersRef: firebase.database().ref('users'),\n    user: this.props.currentUser,\n  }\n\n  componentDidMount() {\n    if(this.state.user) {\n      this.addListeners(this.state.user.uid);\n    }    \n  }\n  \n  addListeners = (userId: string) => {\n    // usersRef\n    // .child(userId)\n    // .child('starred')\n    // .on('child_added', (snap: any) => {\n    //     const starredChannel = {id: snap.key, ...snap.val() };\n    //     setStarred([...starredChannels, starredChannel])\n    // });\n  \n    this.state.usersRef\n      .child(userId)\n      .child('starred')\n      .on('child_added', (snap: any) => {\n        const starredChannel = {id: snap.key, ...snap.val()};\n        this.setState({\n          starredChannels: [...this.state.starredChannels, starredChannel]});\n      });\n  \n      this.state.usersRef\n      .child(userId)\n      .child('starred')\n      .on('child_removed', (snap:any) => {\n          const channelToRemove = { id: snap.key, ...snap.val() };\n          const filteredChannels = this.state.starredChannels.filter( (channel:any) => {\n            return channel.id !== channelToRemove.id;\n          });\n          this.setState({ starredChannels: filteredChannels});\n      })\n  }\n\n  setActiveChannel = (channel: IChannel) => this.setState({activeChannel: channel.id});\n\n  changeChannel = (channel: IChannel) => {\n    this.props.setCurrentChannel(channel);\n    this.setActiveChannel(channel);\n    this.props.setPrivateChannel(true);\n  };\n\n  displayChannels = (channels: Array<any>) => {\n    let newChannels =\n      channels.length > 0 &&\n      channels.map((channel: any) => (\n        <Menu.Item\n          key={channel.id + channel.name}\n          onClick={() => this.changeChannel(channel)}\n          name={channel.name}\n          style={{ opacity: 0.95 }}\n          active={channel.id === this.state.activeChannel}\n        >\n          # {channel.name}\n        </Menu.Item>\n      ));\n    return newChannels;\n  };\n\n  render() {\n\n    const {starredChannels} = this.state;\n\n    return (\n      <>\n        <Menu.Menu className=\"menu\">\n          <Menu.Item>\n            <span>\n              <Icon name=\"star\" /> STARRED\n            </span>{\" \"}\n            ({starredChannels.length}) <Icon name=\"add\" onClick={this.state.openModal} />\n          </Menu.Item>\n          {this.displayChannels(starredChannels)}\n        </Menu.Menu>\n      </>\n    );\n  }\n};\n\nexport default connect(null, { setCurrentChannel, setPrivateChannel })(Starred);\n\n","import React from 'react';\nimport ComponentType from '../../ComponentType';\nimport { Menu } from 'semantic-ui-react';\nimport UserPanel from './userpanel/UserPanel';\nimport Channels from './channels/Channels';\nimport DirectMessages from './directmessages/DirectMessages';\nimport Starred from './starred/Starred';\nimport classes from './SidePanel.module.scss';\n\nclass SidePanel extends ComponentType {\n    render() {\n        const { currentUser, primaryColor } = this.props;\n\n        return (\n            <Menu\n                id={classes.slidePanelContainer}\n                size=\"large\"\n                inverted\n                fixed=\"left\"\n                vertical\n                style={{background: primaryColor, fontSize: '1.2rem'}}\n            >   \n                <UserPanel primaryColor={primaryColor} currentUser={currentUser} />\n                <Starred currentUser={currentUser} />\n                <Channels currentUser={currentUser} />\n                <DirectMessages currentUser={currentUser} />\n            </Menu>\n        )\n    }\n}\nexport default SidePanel;","import React from 'react';\nimport ComponentType from '../../ComponentType';\nimport { Segment, Header, Accordion, Icon, Image, List } from 'semantic-ui-react';\nimport classes from './MetaPanel.module.scss';\n\ninterface IProps {\n    isPrivateChannel: boolean,\n    currentChannel: any, \n    userPosts: any,\n}\n\nclass MetaPanel extends ComponentType<IProps> {\n    state = {\n        activeIndex: 0,\n        privateChannel: this.props.isPrivateChannel,\n        currentChannel: this.props.currentChannel,\n        userPosts: this.props.userPosts,\n    }\n\n    componentDidMount() {\n        console.log('private Channel boolean in componentDidMount: ', this.state.privateChannel);\n        console.log('current Channel object in componentDidMount: ', this.state.currentChannel);\n    }\n\n    formatCount = (num: any) => (num > 1 || num === 0 ? `${num} posts` : `${num} post`);\n\n    displayTopPosters = (posts: any) =>\n        Object.entries(posts)\n              .sort((a:any, b:any) => b[1] - a[1])\n              .map(([key, val]:any, i) => (\n                <List.Item key={i}>\n                    <Image avatar src={val.avatar} />\n                    <List.Content>\n                        <List.Header as ='a'>{key}</List.Header>\n                        <List.Description>{this.formatCount(val.count)} posts</List.Description>\n                    </List.Content>\n                </List.Item>\n              ))\n              .slice(0, 5);\n\n    setActiveIndex = (event: any, titleProps:{index:number}) => {\n        const { index } = titleProps;\n        const { activeIndex } = this.state;\n        \n        const newIndex = activeIndex === index ? -1 : index;\n        this.setState({ activeIndex: newIndex })\n    }\n\n    render() {\n        let {activeIndex, privateChannel, currentChannel} = this.state;\n        const { userPosts } = this.props;\n\n        if(privateChannel=== true) { \n            return null;\n        }\n\n        return (\n            <Segment loading={!currentChannel} id={classes.metaPanel} >\n                <Header as='h3' attached='top'>\n                    About\n                    <span> #{currentChannel && currentChannel.name}</span>\n                </Header>\n                <Accordion styled attached='true'>\n                    <Accordion.Title\n                        active={activeIndex === 0}\n                        index={0}\n                        onClick={this.setActiveIndex}>\n                            <Icon name='dropdown' color='black' />\n                            <Icon name='info' color='black' />\n                            Channel Details\n                    </Accordion.Title>\n                    <Accordion.Content active={activeIndex === 0}>\n                        {currentChannel && currentChannel.details}\n                    </Accordion.Content>\n\n                    <Accordion.Title\n                        active={activeIndex === 1}\n                        index={1}\n                        onClick={this.setActiveIndex}>\n                            <Icon name='dropdown' color='black' />\n                            <Icon name='user circle' color='black' />\n                            Top Posters\n                    </Accordion.Title>\n                    <Accordion.Content active={activeIndex === 1}>\n                        <List>\n                            {userPosts && this.displayTopPosters(userPosts)}\n                            {console.log('users post: ', userPosts)} \n                        </List>\n                    </Accordion.Content>\n\n                    <Accordion.Title\n                        active={activeIndex === 2}\n                        index={2}\n                        onClick={this.setActiveIndex}>\n                            <Icon name='dropdown' color='black' />\n                            <Icon name='pencil alternate' color='black' />\n                            Created By \n                    </Accordion.Title>\n                    <Accordion.Content active={activeIndex === 2}>\n                        <Header as='h3'>\n                            <Image circular src={currentChannel && currentChannel.createdBy.avatar} />\n                            {currentChannel && currentChannel.createdBy.name}\n                        </Header>\n                    </Accordion.Content>\n                </Accordion>\n            </Segment>\n        )};\n}\n\nexport default MetaPanel;","import React from 'react';\nimport { Progress } from 'semantic-ui-react';\nimport styles from './ProgressBar.module.scss';\n\ninterface IProps {\n    uploadState:string,\n    percentUploaded:number,\n}\n\nconst ProgressBar = ({uploadState, percentUploaded}:IProps) =>\n    uploadState === 'uploading' ?  <Progress\n                        className={styles.progressBar}\n                        percent={percentUploaded}\n                        progress    \n                        indicating\n                        size='medium'\n                        inverted />\n                    :\n                   <> </>;\n\n\nexport default ProgressBar;","import React from 'react';\nimport { Modal, Input, Icon, Button } from 'semantic-ui-react'; \nimport ComponentType from '../../../../ComponentType';\nimport {InputEvent} from '../../../../ComponentType';\nimport mime from 'mime-types';\n\n\nclass FileModal extends ComponentType {\n    state:any = {\n        file: null,\n        authorized: ['image/jpeg', 'image/png'],\n    }\n\n    addFile = (event:InputEvent) => {\n        // event.currentTarget.files[0] was giving a 'possibly null error' where the \n        // type was identified as 'FILE | null'.So below(line22 setState({file: files[0]})), where \n        // checked if file is null I set state.file to be the index 0, file[0]\n        const files = event.currentTarget.files;\n        \n        if(files != null) {\n            this.setState({file: files[0]});\n            console.log(\"FileModal -> State FILES: \", files);\n        }\n\n    };\n    sendFile = () => {\n        const {file} = this.state;\n        const {uploadFile, closeModal} = this.props;\n\n        if(file !== null) {\n            if(this.isAuthorized(file.name)) {\n                // send file\n                const metadata = { contentType: mime.lookup(file.name) };\n                uploadFile(file, metadata);\n                closeModal();\n                this.clearFile();\n            }\n        }\n    }\n\n    // lookup = () => {\n        \n    //    let result = mime.lookup(filename); \n    //    results === true ? 'true' : '';\n    // }\n    //                                        includes takes in any returns boolean\n    //                                         mime  takes in string returns false\n    \n    // Check to see if file is an authorized type to be uploaded, using state.authorized\n    isAuthorized = (filename:any) => this.state.authorized.includes(mime.lookup(filename));\n    \n    clearFile = () => this.setState({file: null});\n\n\n    render() {\n        const {modal, closeModal} = this.props;\n        return ( \n                    <Modal basic open={modal} onClose={closeModal}>\n                        <Modal.Header>Select an Image Files</Modal.Header>\n                        <Modal.Content>\n                            <Input\n                                onChange={this.addFile}\n                                fluid\n                                label='File types: jpg, png'\n                                name='file'\n                                type='file'\n                            />\n                        </Modal.Content>\n                        <Modal.Actions>\n                            <Button\n                                color='green'\n                                inverted\n                                onClick={this.sendFile}\n                            >\n                                <Icon name='checkmark' /> Send\n                            </Button>\n                            <Button\n                                color='red'\n                                inverted\n                                onClick={closeModal}\n                            > \n                                <Icon name='remove' /> Cancel\n                            </Button>\n                        </Modal.Actions>\n                    </Modal>\n                );\n            }\n}\nexport default FileModal;","import React from 'react';\nimport uuidv4 from 'uuid/v4';\nimport firebase from '../../../firebase';\nimport {Segment, Button, Input} from 'semantic-ui-react';\nimport ComponentType from '../../../ComponentType';\nimport ProgressBar from '../progressbar/ProgressBar';\nimport styles from './MessageForm.module.scss';\nimport FileModal from './filemodal/FileModal';\n\n/**\n * FormEvent for Submiting the form\n * InputEven for Event.target properties such as currentTarget.value & name\n */\ntype FormEvent = React.FormEvent<HTMLFormElement>;\ntype InputEvent = React.FormEvent<HTMLInputElement>;\n\n// interface IState {\n//     message:string,\n//     channel:object,\n//     user:object,\n//     loading:boolean,\n//     errors:[ConcatArray<ErrorConstructor>, {message:}]\n// }\ninterface IState {\n        storageRef:any,\n        uploadTask: any,\n        uploadState: string,\n        percentUploaded: number,\n        message: string,\n        channel: {id: number},\n        user: {\n               uid: any,\n               displayName: string,\n               photoURL: string\n            },\n        loading: boolean,\n        errors: [{message: string}],\n        modal: boolean,\n}\n\n\ninterface IProps {\n    currentChannel: {id: number},\n    currentUser: {  \n                    uid: any,\n                    displayName: string,\n                    photoURL: string\n                },\n    messagesRef: any,\n    isPrivateChannel: boolean,\n    getMessagesRef: any,\n}\n\nclass MessageForm extends ComponentType<IProps> {\n    state:IState = {\n        storageRef: firebase.storage().ref(),\n        uploadTask: null,\n        uploadState: '',\n        percentUploaded: 0,\n        message: '',\n        channel: this.props.currentChannel,\n        user: this.props.currentUser,\n        loading: false,\n        errors: [{message: ''}],\n        modal: false,\n    }\n\n    openModal = () => this.setState({modal: true});\n\n    closeModal = () => this.setState({modal: false});\n\n    handleChange = (event:InputEvent) => {\n        this.setState({[event.currentTarget.name]: event.currentTarget.value});\n    }\n    /**\n     * Creates a message object with timestamp, user, & content properties\n     * @function createMessage\n     * @returns {message:object}\n     */\n    createMessage = (fileUrl?:string):object => {\n        let message: {\n            timestamp:object,\n            user: {\n                id: number,\n                name: string,\n                avatar: string,\n            },\n            image: string,\n            content: string,\n        } \n            message = {\n            timestamp: firebase.database.ServerValue.TIMESTAMP,\n            user: {\n                id: this.state.user.uid,\n                name: this.state.user.displayName,\n                avatar: this.state.user.photoURL\n            },\n            image: '',\n            content: ''\n        };\n\n        if(fileUrl !== null && fileUrl) {  //   ???? CHECKING FOR 'N U L L' ????\n            message['image'] = fileUrl;\n        } else {\n            message['content'] = this.state.message;\n        }\n\n        return message;\n    }\n    /**\n     * If there's a message then set the firebase messagesRef properties and state.loading to true\n     * @function sendMessage\n     * @param {undefined}\n     * @returns {void}\n     */\n    sendMessage = (): void => {\n        const { getMessagesRef } = this.props;\n        const { message, channel } = this.state;\n\n        if(message) {\n            this.setState({loading: true});\n            getMessagesRef()\n                .child(channel.id)\n                .push()\n                .set(this.createMessage())\n                .then(() => {\n                    this.setState({loading:false, message: '', errors:[] })\n                })\n                .catch( (err:ConcatArray<{message:string}>) => {\n                    console.error(err);\n                    this.setState({\n                        loading: false,\n                        errors: this.state.errors.concat(err)\n                    })\n                })\n        }        \n        else {\n            this.setState({\n                errors: this.state.errors.concat({ message: 'Add a message' })\n            })\n        }\n    }\n\n    getPath = () => {\n        if(this.props.isPrivateChannel) {\n            return `chat/private-${this.state.channel.id}`;\n        } else {\n            return 'chat/public';\n        }\n    }\n\n    uploadFile = (file:any, metadata:any) => {\n        const pathToUpload = this.state.channel.id;\n        const ref = this.props.messagesRef();\n        //UUID creates random strings for pictures such as seen in social media imgs\n        const filePath = `${this.getPath()}/${uuidv4()}.jpg`;\n        \n        this.setState({\n            uploadState: 'uploading',\n            uploadTask: this.state.storageRef.child(filePath).put(file, metadata)\n\n        },  () => {\n            this.state.uploadTask.on('state_changed', (snap:any) => {\n                const percentUploaded = Math.round((snap.bytesTransferred / snap.totalBytes) * 100);\n                this.setState({percentUploaded});\n            },\n                (err:Error) => {\n                    console.log(err);\n                    this.setState({\n                        errors: this.state.errors.concat(err),\n                        uploadState: 'error',\n                        uploadTask: null,\n                    })\n                },\n                () => {\n                    this.state.uploadTask.snapshot.ref.getDownloadURL().then((downloadUrl:string) => {\n                        this.sendFileMessage(downloadUrl, ref, pathToUpload);\n                    })\n                    .catch((err:Error)  => {\n                        console.log(err);\n                        this.setState({\n                            errors: this.state.errors.concat(err),\n                            uploadState: 'error',\n                            uploadTask: null,\n                        })\n                    })\n                }\n            )\n        });\n\n    }//=>END OF uploadFile\n\n    sendFileMessage = (fileUrl:string, ref:any, pathToUpload:number) => {\n        ref.child(pathToUpload)   \n           .push()\n           .set(this.createMessage(fileUrl))\n           .then(() => {\n               this.setState({uploadState: 'done'})\n           })\n           .catch((err:Error) => {\n            console.error(err);\n            this.setState({\n                errors: this.state.errors.concat(err)  \n            })\n           })\n    }\n\n    render() {\n  \n        const {errors, message, modal, loading, uploadState, percentUploaded} = this.state;\n\n        return (\n\n            <Segment\n             className={styles.messageForm}\n            >\n                <Input \n                    fluid\n                    name='message'\n                    onChange={this.handleChange}\n                    value={message}\n                    style={{marginBottom: '0.7em'}}\n                    label={<Button icon={'add'} />}\n                    labelPosition='left'\n                    placeholder='Write your message'\n                    className={\n                        errors.some(error => error.message.includes('message')) \n                        ? 'error' \n                        : ''\n                    }\n                    />\n\n            <Button.Group icon widths='1'>\n                <Button\n                    onClick={this.sendMessage}\n                    disabled={loading}\n                    color='orange'\n                    content='Add Replay'\n                    labelPosition='left'\n                    icon='edit'\n                />\n                <Button\n                    color='teal'\n                    disabled={uploadState === 'uploading'}\n                    onClick={this.openModal}\n                    content='Upload Media'\n                    labelPosition='right'\n                    icon='cloud upload'\n                    />\n\n            </Button.Group>        \n                <FileModal\n                    modal={modal}\n                    closeModal={this.closeModal}\n                    uploadFile={this.uploadFile}\n                    />\n                <ProgressBar\n                    uploadState={uploadState} \n                    percentUploaded={percentUploaded}\n                />\n            </Segment>\n\n        )\n    }\n}\n\nexport default MessageForm;","import React from 'react';\nimport {Header, Segment, Input, Icon} from 'semantic-ui-react';\nimport ComponentType, {InputEvent, FormEvent} from '../../../ComponentType';\n\n\ninterface IProps {\n    channelName: string,\n    numUniqueUsers: number,\n    handleSearchChange:(event:any) => void,\n    searchLoading: boolean,\n    isPrivateChannel: boolean,\n    isChannelStarred: boolean,\n    handleStar: () => any,\n}\n\nclass MessagesHeader extends ComponentType<IProps> {\n\n    render() {\n        const {channelName, numUniqueUsers, handleSearchChange, \n            searchLoading, isPrivateChannel, isChannelStarred,\n            handleStar} = this.props;\n        return (\n            <Segment clearing>\n                {/* Channel Title */}\n                <Header fluid='true' as='h2' floated='left' style={{ marginBottom: 0 }}>\n                    <span>\n                       {channelName}\n                       {!isPrivateChannel && (\n                       <Icon \n                            onClick={handleStar} \n                            name={isChannelStarred ? 'star' : 'star outline'} \n                            color={ isChannelStarred ? 'yellow' : 'black'} \n                        />)}\n                    </span>\n                    \n                    <Header.Subheader>{numUniqueUsers}</Header.Subheader>\n                </Header>\n\n                {/* Channel Search Input */}\n                <Header>\n                <Input\n                    loading={searchLoading}\n                    onChange={handleSearchChange}\n                    size=\"mini\"\n                    icon=\"search\"\n                    name=\"searchTerm\"\n                    placeholder=\"Search Messages\"\n                />\n\n                </Header>\n            </Segment>\n        );\n    }\n}\n\nexport default MessagesHeader;","import React from 'react';\nimport moment from 'moment';\nimport { Comment, Image } from 'semantic-ui-react';\n\ntype messageType = {timestamp:number};\n\ninterface IState {\n    key:number, \n    message:messageType,\n    user: object\n}\n\nconst isOwnMessage = (message:any, user:any) => \n    message.user.id === user.uid ? 'message__self' : '';\n\nconst isImage = (message:any) => \n    message.image !== '' && message.content === '';\n\n\nconst timeFromNow = (timestamp:number) => moment(timestamp).fromNow();\n\nconst Message = ({message, user}:any) => (\n        <>\n        <Comment>\n            <Comment.Avatar src={message.user.avatar} />\n            <Comment.Content className={isOwnMessage(message, user)}>\n                <Comment.Author as='a'>{message.user.name}</Comment.Author>\n                <Comment.Metadata>{timeFromNow(message.timestamp)}</Comment.Metadata>\n               \n                {isImage(message) ?\n                     <Image src={message.image} className=\"message__image\" />\n                    : \n                     <Comment.Text>{message.content}</Comment.Text>    \n            }\n            </Comment.Content>\n        </Comment>\n        </>\n    );\nexport default Message;\n ","import React from 'react';\nimport { Segment, Comment } from 'semantic-ui-react';\nimport MessageForm from './messageform/MessageForm'; \nimport MessagesHeader from './messagesheader/MessagesHeader';\nimport ComponentType from '../../ComponentType'; \nimport Message from './message/Message';\nimport styles from './Messages.module.scss';\nimport firebase from '../../firebase'; \nimport {InputEvent} from '../../ComponentType';\nimport { connect } from 'react-redux';\nimport { setUserPosts } from '../../store/actions/index';\nimport classes from './Messages.module.scss';\n\ninterface IProps {\n    key: any,\n    currentChannel: object,\n    currentUser: object,\n    isPrivateChannel: boolean,\n    handleStar?: () => void,\n    starChannel?: () => void,\n    addUserStarsListener?: () => void,\n    setUserPosts?: any,\n}\n\ninterface IState {\n    privateChannel: boolean,\n    privateMessagesRef: any,\n    messagesRef: any,\n    messages: [],\n    messagesLoading: boolean,\n    channel: object,\n    user: object,\n    userRef: object,\n    numUniqueUsers: string,\n    searchTerm: string,\n    searchLoading: boolean,\n    searchResults: [],\n    isChannelStarred: boolean\n}\n\nclass Messages extends ComponentType<IProps> {\n    state:any = {\n        privateChannel: this.props.isPrivateChannel,\n        privateMessagesRef: firebase.database().ref(\"privateMessages\"),\n        messagesRef: firebase.database().ref('messages'),\n        messages: [],\n        messagesLoading: true,\n        channel: this.props.currentChannel,\n        user: this.props.currentUser,\n        usersRef: firebase.database().ref('users'),\n        numUniqueUsers: '',\n        searchTerm: '',\n        searchLoading: false,\n        searchResults: [],\n        isChannelStarred: false,\n    }\n\n    componentDidMount() {\n\n       const { channel, user } = this.state;\n\n       if(channel && user) {\n            this.addListeners(channel.id);\n            this.addUserStarsListener(channel.id, user.uid);\n       }\n    }\n\n    addUserStarsListener = (channelId: string, userId: number) => {\n        this.state.usersRef\n            .child(userId)\n            .child('starred')\n            .once('value')\n            .then((data: {val:()=>any}) => {\n                 if(data.val() !== null) {\n                    const channelIds = Object.keys(data.val());\n                    const prevStarred = channelIds.includes(channelId);\n                    this.setState({ isChannelStarred: prevStarred});\n                 }\n            }) \n    }\n     \n    addListeners = (channelId:any) => {\n        this.addMessageListener(channelId);\n        return channelId;\n    }\n    /**\n     * Pull data from messagesRef snap values in to loadedmessages\n     * Set loadedMessages into state messages[] and set loading to false\n     * @param {channelID:string} \n     * @return {void}\n     */\n    addMessageListener = (channelId: any):void => {\n        let loadedMessages:Array<any> = [];\n        const ref = this.getMessagesRef();\n        ref.child(channelId).on(\"child_added\", (snap:any) => {\n          loadedMessages.push(snap.val());\n          this.setState({\n            messages: loadedMessages,\n            messagesLoading: false\n          });\n          this.countUniqueUsers(loadedMessages);\n          this.countUserPosts(loadedMessages);\n        });\n      };\n\n    getMessagesRef = () => {\n        const { messagesRef, privateMessagesRef, privateChannel } = this.state;\n        return privateChannel ? privateMessagesRef : messagesRef;\n      };\n\n    handleStar = () => {\n        this.setState((prevState:{isChannelStarred: boolean}) => ({\n            isChannelStarred: !prevState.isChannelStarred\n        }), () => this.starChannel());\n    }\n\n    starChannel = () => {\n        if(this.state.isChannelStarred) {\n            this.state.usersRef\n                .child(`${this.state.user.uid}/starred`) //UsersRef object has a child which is like a property, then state.user \n                                                         //represents specific user and reacheds in the /starred directory\n                .update({\n                    [this.state.channel.id]: {\n                        name: this.state.channel.name,\n                        details: this.state.channel.details,\n                        createBy: {\n                            name: this.state.channel.createdBy.name,\n                            avatar: this.state.channel.createdBy.avatar,\n                        }\n                    }\n                });\n            \n        } else {\n            this.state.usersRef\n                .child(`${this.state.user.uid}/starred`)\n                .child(this.state.channel.id)\n                .remove((err:Error) => {\n                    if(err !== null) {\n                        console.error(err);\n                    }\n                })\n        }\n    }\n    /**\n     * Function that's passed so that MessageHeader can \n     * have an effect in this upper Component Messages.\n     * Changes the search term in Messages and searchLoading:true.\n     */\n    handleSearchChange = (event:InputEvent) => {\n         this.setState({\n             searchTerm: event.currentTarget.value,\n             searchLoading: true,\n         }, () => this.handleSearchMessages());\n    }\n\n    handleSearchMessages = () => {\n        const channelMessages = [...this.state.messages];\n        const regex = new RegExp(this.state.searchTerm, 'gi');\n        const searchResults = channelMessages.reduce((acc, message) => {\n            if(message.content && message.content.match(regex) ||\n               message.user.name.match(regex)\n            ) {\n                acc.push(message);\n            }\n            return acc;\n        }, []);\n        this.setState({ searchResults });\n        setTimeout(() => this.setState({ searchLoading: false}), 1000);\n    }\n\n    //check to see if accumulator includes a specific name from 'messages' to see if its unique\n    countUniqueUsers = (messages:Array<any>) => {\n        const uniqueUsers = messages.reduce((acc,message) => {\n            if(!acc.includes(message.user.name)) {\n                acc.push(message.user.name);\n            }\n            return acc;\n        },[]);\n        const plural = uniqueUsers.length > 1 || uniqueUsers.length === 0;\n        const numUniqueUsers = `${uniqueUsers.length} user${plural ? \"s\" : \"\"}`;\n        this.setState({numUniqueUsers});\n    }\n\n    // countUsersPosts = (messages:Array<string>) => {\n    //     let userPosts = messages.reduce((acc:any, message:any):any => {\n    //         if(message.user.name in acc) {\n    //             acc[message.user.name].count += 1;\n    //         } else {\n    //             acc[message.user.name] = {\n    //                 avatar: message.user.avatar,\n    //                 count: 1\n    //             }\n    //         }\n    //         return acc;\n    //     }, {});\n       \n    // }\n\n    countUserPosts = (messages: Array<any>) => {\n        let userPosts = messages.reduce((acc, message) => {\n            if(message.user.name in acc) {\n                acc[message.user.name].count += 1;\n            } else {\n                acc[message.user.name] = {\n                    avatar: message.user.avatar,\n                    count: 1\n                }\n            }\n            return acc;\n        }, {});\n        console.log('userPosts -> Messages: ', userPosts);\n        this.props.setUserPosts(userPosts);\n    }\n\n    displayMessages = (messages:Array<any>) => (\n        messages.length > 0 && messages.map((message:{timestamp:number}) => (\n            <Message \n                key={message.timestamp}\n                message={message}\n                user={this.state.user}\n            />\n        ))\n    )\n    \n    // isProgressBarVisible = (percent:number) => {\n    //     if(percent > 0) {\n    //         this.setState({progressBar: true});\n    //     }\n    // }\n    \n    displayChannelName = (channel:{id: number, name: string}) => \n    channel ? `${this.state.privateChannel ? '@' : '#'}${channel.name}` : '';\n    \n    render() {\n        const {messagesRef, messages, channel, user, numUniqueUsers,\n             searchTerm, searchResults, searchLoading, privateChannel, isChannelStarred} = this.state; \n \n        return (\n            <>\n            <MessagesHeader\n                channelName={this.displayChannelName(channel)}\n                numUniqueUsers={numUniqueUsers}\n                handleSearchChange={this.handleSearchChange}\n                searchLoading={searchLoading}\n                isPrivateChannel={privateChannel}\n                handleStar={this.handleStar}\n                isChannelStarred={isChannelStarred}\n            />\n            \n            {/* <div className={classes.messages__segmentWrapper}> */}\n            <Segment> \n                <Comment.Group style={{maxWidth:'98%'}} className={styles.messages}>\n                    {searchTerm ? this.displayMessages(searchResults) :\n                     this.displayMessages(messages)}\n                </Comment.Group>\n            </Segment>\n            {/* </div> */}\n            <MessageForm\n                messagesRef={messagesRef}\n                currentChannel={channel}\n                currentUser={user}\n                isPrivateChannel={privateChannel}\n                getMessagesRef={this.getMessagesRef}\n            />\n            </>\n        )\n    }\n}\nexport default connect<any, any>(null, {setUserPosts})(Messages);\n","import * as actionTypes from './actionTypes';\n\n\nexport const setUserPosts = (userPosts: any) => {\n    return {\n        type: actionTypes.SET_USER_POSTS,\n        payload: {\n            userPosts\n        }\n    }\n}","import React from 'react';\nimport {Grid} from 'semantic-ui-react';\nimport ColorPanel from './colorpanel/ColorPanel'; \nimport SidePanel from './sidepanel/SidePanel';\nimport MetaPanel from './metapanel/MetaPanel'; \nimport Messages from './messages/Messages';\nimport {connect} from 'react-redux';\n\n// Exported Types\nexport type InputEvent = React.FormEvent<HTMLInputElement>;\nexport type FormEvent = React.FormEvent<HTMLFormElement>;\nexport type User = {displayName:string, photoURL:string};\nexport type Notification = {\n  id: number,\n  total: number,\n  lastKnownTotal: number,\n  count: number,\n}\n\nexport interface IChannel {id:number, name:string, details: string};\n\nexport interface INewChannel {\n    id: string,\n    name: string,\n    details: string,\n    createdBy: {\n        name: string,\n        avatar: string\n    }\n}\n\nexport interface Store extends React.Props<any> {\n  store?: any;\n}\n\n// Non Exported types\ninterface Props {\n  currentUser:{displayName:string}\n}\n\nconst App: React.FC = ({currentUser, currentChannel, isPrivateChannel,\n                        userPosts, primaryColor, secondaryColor}:any) => {\n  \n  return (\n    <Grid columns=\"equal\" style={{background: secondaryColor, height: '100vh', margin: '0' }}> \n      <ColorPanel\n        key={currentUser && currentUser.name}\n        currentUser={currentUser} />\n      <SidePanel\n        key={currentUser && currentUser.uid}\n        currentUser={currentUser}\n        primaryColor={primaryColor}\n        />\n\n      <Grid.Column style={{marginLeft: 320}}>\n        <Messages\n          key={currentChannel && currentChannel.id}\n          currentChannel={currentChannel}\n          currentUser={currentUser}\n          isPrivateChannel={isPrivateChannel}\n        />\n      </Grid.Column>\n\n      <Grid.Column width={4}>\n        <MetaPanel\n          key={currentChannel && currentChannel.name}\n          currentChannel={currentChannel}\n          userPosts={userPosts}\n          isPrivateChannel={isPrivateChannel} />      \n      </Grid.Column>\n    </Grid>\n    );\n};\n\nconst mapStateToProps = (state:any):any => ({\n  currentUser: state.user.currentUser,\n  currentChannel: state.channel.currentChannel,\n  isPrivateChannel: state.channel.isPrivateChannel,\n  userPosts: state.user.userPosts,\n  primaryColor: state.colors.primaryColor,\n  secondaryColor: state.colors.secondaryColor\n}); \n\nexport default connect(mapStateToProps)(App);","import React from \"react\";\nimport {\n  Grid,\n  Form,\n  Segment,\n  Button,\n  Header,\n  Message,\n  Icon\n} from \"semantic-ui-react\";\nimport ComponentType from \"../../../ComponentType\";\nimport { Link } from \"react-router-dom\";\nimport firebase from 'firebase';\nimport classes from \"./Login.module.scss\";\n\ntype FormEvent = React.FormEvent<HTMLFormElement>;\ntype InputEvent = React.FormEvent<HTMLInputElement>;\n\ninterface IErrorMessage {\n  message: string;\n}\n\ninterface IForm {\n  email: string;\n  password: string;\n  errors: Array<IErrorMessage>; // IErrorMessage is casted, not required when casted\n  loading: boolean;\n}\n\nclass Login extends ComponentType {\n  // const Register = () => {\n  state: IForm = {\n    email: \"\",\n    password: \"\",\n    errors: [],\n    loading: false\n  };\n  displayErrors = (errors: Array<IErrorMessage>) =>\n    errors.map((error: IErrorMessage, i) => <p key={i}>{error.message}</p>);\n\n  //Typescript uses event.currentTarget instead of event.target along with dot notation '.value'\n  //InputEvent has been declared above with React.FormEvent<....>\n  handleChange = (event: InputEvent) => {\n    this.setState({ [event.currentTarget.name]: event.currentTarget.value });\n  };\n  handleSubmit = (event: FormEvent) => {\n    event.preventDefault();\n    if (this.isFormValid(this.state)) {\n      this.setState({ errors: [], loading: true });\n    firebase\n        .auth()\n        .signInWithEmailAndPassword(this.state.email, this.state.password)\n        .then(signedInUser => {\n            console.log(signedInUser);\n        })\n        .catch(err => {\n            console.error(err);\n            this.setState({\n                errors: this.state.errors.concat(err),\n                loading: false\n            })\n        })\n    }\n  };\n\n  isFormValid = (credentials:{email:string, password:string}) => credentials.email && credentials.password;\n\n  handleInputError = (errors: Array<IErrorMessage>, inputName: string) =>\n    errors.some(error => error.message.toLowerCase().includes(inputName))\n      ? \"error\"\n      : \"\";\n\n  render() {\n    const { email, password, errors, loading } = this.state;\n    return (\n      <Grid\n        textAlign=\"center\"\n        verticalAlign=\"middle\"\n        className={classes.register}\n        data-test=\"register-component\"\n      >\n        <Grid.Column style={{ maxWidth: 450 }}>\n          <Header as=\"h1\" icon color=\"violet\" textAlign=\"center\">\n            \n            <span className={classes.loginHeader}>Login In Here</span>\n          </Header>\n          <form className={classes.formContainer} onSubmit={this.handleSubmit}>\n              <div> \n                <p>DevChat</p>\n              </div>\n\n              <input\n                name=\"email\"\n                placeholder=\"Email Address\"\n                value={email}\n                className={this.handleInputError(errors, \"email\")}\n                onChange={this.handleChange}\n                type=\"email\"\n              />\n\n              <input\n                name=\"password\"\n                placeholder=\"Password\"\n                value={password}\n                className={this.handleInputError(errors, \"password\")}\n                onChange={this.handleChange}\n                type=\"password\"\n              />\n\n              <Button\n                disabled={loading}\n                className={loading ? \"loading\" : \" \"}\n                color=\"violet\"\n                fluid\n                size=\"large\"\n              >\n                Submit\n              </Button>\n            <div className='uiMessage'>\n              Don't have an account? {' '}\n              <Link to=\"/Chat-App/register\"> Register</Link>\n            </div>\n          </form>\n          {errors.length > 0 && (\n            <Message error>\n              <h3>Error</h3>\n              {this.displayErrors(errors)}\n            </Message>\n          )}\n        </Grid.Column>\n      </Grid>\n    );\n  }\n}\nexport default Login;\n","import React, { FormEventHandler } from \"react\";\nimport {\n  Grid,\n  Form,\n  Segment,\n  Button,\n  Header,\n  Message,\n  Icon\n} from \"semantic-ui-react\";\nimport ComponentType from \"../../../ComponentType\";\nimport { Link } from \"react-router-dom\";\nimport classes from \"./Register.module.scss\";\nimport firebase from \"../../../firebase\";\nimport md5 from \"md5\";\n\ntype FormEvent = React.FormEvent<HTMLFormElement>;\ntype InputEvent = React.FormEvent<HTMLInputElement>;\n\ninterface IErrorMessage {\n  message: string;\n} \n\ninterface IForm {\n  username: string;\n  email: string;\n  password: string;\n  passwordConfirmation: string;\n  errors: Array<IErrorMessage>; // IErrorMessage is casted, not required when casted\n  loading: boolean;\n  usersRef: any;\n  // value:string\n}\n\nexport class Register extends ComponentType {\n  // const Register = () => {\n  state: IForm = {\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    passwordConfirmation: \"\",\n    errors: [],\n    loading: false,\n    usersRef: firebase.database().ref(\"users\")\n    // value: ''\n  };\n  displayErrors = (errors: Array<IErrorMessage>) =>\n    errors.map((error: IErrorMessage, i) => <p key={i}>{error.message}</p>);\n\n  //Typescript uses event.currentTarget instead of event.target along with dot notation '.value'\n  //InputEvent has been declared above with React.FormEvent<....>\n  handleChange = (event: InputEvent) => {\n    this.setState({ [event.currentTarget.name]: event.currentTarget.value });\n  };\n  handleSubmit: FormEventHandler = event => {\n    event.preventDefault();\n    if (this.isFormValid()) {\n      this.setState({ errors: [], loading: true });\n      firebase\n        .auth()\n        .createUserWithEmailAndPassword(this.state.email, this.state.password)\n        .then((createdUser: any) => {\n          console.log(createdUser);\n          createdUser.user\n            .updateProfile({\n              displayName: this.state.username,\n              photoURL: `http://gravatar.com/avatar/${md5(\n                createdUser.user.email\n              )}?d=identicon`\n            })\n            .then(() => {\n              this.saveUser(createdUser).then(() => {\n                console.log(\"user saved\");\n              });\n            })\n            .catch((err: Error) => {\n              console.error(err);\n              this.setState({\n                errors: this.state.errors.concat(err),\n                loading: false\n              });\n            });\n        })\n        .catch((err: IErrorMessage) => {\n          console.error(err);\n          this.setState({\n            errors: this.state.errors.concat(err),\n            loading: false\n          });\n        });\n    }\n  };\n\n  saveUser = (createdUser: any) => {\n    return this.state.usersRef.child(createdUser.user.uid).set({\n      name: createdUser.user.displayName,\n      avatar: createdUser.user.photoURL\n    });\n  };\n\n  handleInputError = (errors: Array<IErrorMessage>, inputName: string) =>\n    errors.some(error => error.message.toLowerCase().includes(inputName))\n      ? \"error\"\n      : \"\";\n\n  isFormValid = () => {\n    let errors: Array<IErrorMessage> = this.state.errors;\n    let error;\n    if (this.isFormEmpty(this.state)) {\n      error = { message: \"Fill In All Fields\" };\n      this.setState({ errors: errors.concat(error) });\n      return false;\n    } else if (!this.isPasswordValid(this.state)) {\n      error = { message: \"Password is invalid\" };\n      this.setState({ errors: errors.concat(error) });\n      return false;\n    } else {\n      return true;\n    }\n  };\n\n  isFormEmpty = (form: IForm) => {\n    return (\n      !form.username.length ||\n      !form.email.length ||\n      !form.password.length ||\n      !form.passwordConfirmation.length\n    );\n  };\n\n  isPasswordValid = (form: IForm) => {\n    let { password, passwordConfirmation } = form;\n    if (password.length < 6 || passwordConfirmation.length < 6) {\n      return false;\n    } else if (password !== passwordConfirmation) {\n      return false;\n    } else {\n      return true;\n    }\n  };\n  render() {\n    const {\n      username,\n      email,\n      password,\n      passwordConfirmation,\n      errors,\n      loading\n    } = this.state;\n    return (\n      <Grid\n        textAlign=\"center\"\n        verticalAlign=\"middle\"\n        className={classes.register}\n        data-test=\"register-component\"\n      >\n        <Grid.Column style={{ maxWidth: 450 }}>\n          <Header as=\"h1\" icon color=\"orange\" textAlign=\"center\">\n            <span className={classes.loginHeader}>Register With Us</span>\n          </Header>\n          <form\n            data-test=\"form-component\"\n            onSubmit={this.handleSubmit}\n            className={classes.formContainer}\n          >\n            <div>\n              <p>DevChat</p>\n            </div>\n\n            <input\n              data-test=\"username-input\"\n              name=\"username\"\n              placeholder=\"Username\"\n              value={username}\n              onChange={this.handleChange}\n              type=\"text\"\n            />\n            <input\n              name=\"email\"\n              placeholder=\"Email Address\"\n              value={email}\n              className={this.handleInputError(errors, \"email\")}\n              onChange={this.handleChange}\n              type=\"email\"\n            />\n\n            <input\n              name=\"password\"\n              placeholder=\"Password\"\n              value={password}\n              className={this.handleInputError(errors, \"password\")}\n              onChange={this.handleChange}\n              type=\"password\"\n            />\n\n            <input\n              name=\"passwordConfirmation\"\n              placeholder=\"Password Confirmation\"\n              value={passwordConfirmation}\n              className={this.handleInputError(errors, \"password\")}\n              onChange={this.handleChange}\n              type=\"password\"\n            />\n\n            <Button\n              data-test=\"component-submit-btn\"\n              disabled={loading}\n              className={loading ? \"loading\" : \" \"}\n              color=\"orange\"\n              size=\"large\"\n            >\n              Submit\n            </Button>\n            <div className=\"uiMessage\">\n              Already a user?\n              <Link to=\"/Chat-App/login\"> Login</Link>\n            </div>\n          </form>\n          {errors.length > 0 && (\n            <Message error>\n              <h3>Error</h3>\n              {this.displayErrors(errors)}\n            </Message>\n          )}\n        </Grid.Column>\n      </Grid>\n    );\n  }\n}\nexport default Register;\n","import React from 'react';\nimport { Loader, Dimmer } from 'semantic-ui-react';\n\nconst Spinner = () => \n    <Dimmer active>\n        <Loader size=\"huge\" content={\"Preparing Chat...\"} />\n    </Dimmer>\n    \nexport default Spinner;","import { combineReducers } from \"redux\";\nimport * as actionTypes from \"../actions/actionTypes\";\n\nconst initialUserState = {\n  currentUser: null,\n  isLoading: true\n};\n\nconst user_reducer = (state = initialUserState, action:any) => {\n  switch (action.type) {\n    case actionTypes.SET_USER:\n      return {\n        currentUser: action.payload.currentUser,\n        isLoading: false\n      };\n    case actionTypes.CLEAR_USER:\n      return {\n        ...initialUserState,\n        isLoading: false\n      };\n      case actionTypes.SET_USER_POSTS:\n      return {\n        ...state,\n        userPosts: action.payload.userPosts\n      };\n    default:\n      return state;\n  }\n};\nexport default user_reducer;","import * as actionTypes from '../actions/actionTypes';\nimport {IChannel} from '../actions/setCurrentChannel'\n\n\nconst initialChannelState = {\n  currentChannel: '',\n  userPosts: null,\n};\n\nconst channel_reducer = (state = initialChannelState, action:any) => {\n  switch (action.type) {\n    case actionTypes.SET_CURRENT_CHANNEL:\n      return {\n        ...state,\n        currentChannel: action.payload.currentChannel\n      }\n    case actionTypes.SET_PRIVATE_CHANNEL:\n      return {\n          ...state,\n          isPrivateChannel: action.payload.isPrivateChannel\n      }\n    default:\n      return state;\n  }\n}\nexport default channel_reducer;\n\n\n\n// import * as actionTypes from '../actions/actionTypes';\n// import {ChannelActions, ChannelState} from '../actions/channelActions';\n// // import {IChannel} from '../actions/setCurrentChannel'\n\n\n// const initialChannelState = {\n//   currentChannel: null\n// };\n\n// const channel_reducer = (state = initialChannelState, action:ChannelActions):ChannelState => {\n//   switch (action.type) {\n//     case actionTypes.SET_CURRENT_CHANNEL:\n//       return {\n//         ...state,\n//         currentChannel: action.payload\n//       }\n//     case actionTypes.SET_PRIVATE_CHANNEL:\n//       return {\n//           ...state,\n//           isPrivateChannel: action.payload.isPrivateChannel\n//       }\n//     default:\n//       return state;\n//   }\n// }\n// export default channel_reducer;","import * as actionTypes from '../actions/actionTypes';\n\nconst initialColorsState = {\n    primaryColor: '',\n    secondaryColor: 'linear-gradient(45deg, rgba(140, 142, 240, 0.25) 1%, #f5f5fc 50%)'\n}\n\nconst colors_reducer = (state = initialColorsState, action: any) => {\n    switch(action.type) {\n        case actionTypes.SET_COLORS:\n            return {\n                primaryColor: action.payload.primaryColor,\n                secondaryColor: action.payload.secondaryColor\n            }\n        default: \n            return state;\n    }\n}\n\nexport default colors_reducer;","//  export defaults allows for you to rename your imports\nimport { combineReducers } from 'redux';\nimport user_reducer from './user_reducer';\nimport channel_reducer from './channel_reducer';\nimport colors_reducer from './colors_reducer';\n\nconst rootReducer = combineReducers({\n    user: user_reducer,\n    channel: channel_reducer,\n    colors: colors_reducer\n}); \n\nexport default rootReducer;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nimport App from \"./components/App\";\nimport ComponentType from './ComponentType';\nimport Login from \"./components/auth/login/Login\";\nimport Register from \"./components/auth/register/Register\";\nimport Spinner from \"./components/ui/spinner/Spinner\";\n\nimport \"semantic-ui-react\";\n\nimport { Provider, connect } from \"react-redux\";\nimport thunk from \"redux-thunk\";\nimport { applyMiddleware, compose, createStore } from \"redux\";\n\nimport rootReducer from \"./store/reducers\";\n\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  withRouter\n} from \"react-router-dom\";\n\n//importing action setupUser\nimport { setUser, clearUser } from \"./store/actions/setUser\";\n\nimport firebase from \"./firebase\";\n\nexport const composeEnhancers =\n  (window && (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__) || compose;\n\n// ENZYME COURSE MIDDLEWARES EDIT to export to testUtil.tsx\nexport const middlewares = [thunk];\n\nconst store = createStore(\n  rootReducer,\n  composeEnhancers(applyMiddleware(thunk))\n);\n\nclass Root extends ComponentType {\n  // Root will be in the connect()()\n  componentDidMount() {\n    firebase.auth().onAuthStateChanged(user => {\n      if (user) {\n        this.props.setUser(user);\n        this.props.history.push(\"/Chat-App\");\n      } else {\n        this.props.history.push('/Chat-App/login');\n        this.props.clearUser();\n      }\n    });\n  }\n  render() {\n    return this.props.isLoading ? <Spinner /> : (\n      <Switch>\n        <Route exact path=\"/Chat-App\" component={App} />\n        <Route path=\"/Chat-App/login\" component={Login} />\n        <Route path=\"/Chat-App/register\" component={Register} />\n      </Switch>\n    );\n  }\n}\nconst mapStateToProps = (state:{user:{isLoading:boolean}}) => ({\n  isLoading: state.user.isLoading\n});\n\nconst RootWithAuth = withRouter(\n  connect(\n    mapStateToProps,\n    { setUser, clearUser }\n  )(Root)\n);\n\nif (document.getElementById(\"root\")) {\n  ReactDOM.render(\n    <Provider store={store}>\n      <Router>\n        <RootWithAuth />\n      </Router>\n    </Provider>,\n    document.getElementById(\"root\")\n  );\n}\nexport default Root;\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import * as actionTypes from './actionTypes';\n\nexport interface ISetUser {\n    type: string,\n    payload: {\n        currentUser:string\n    }\n}\n\nexport const setUser = (user:object) => {\n    return {\n        type: actionTypes.SET_USER,\n        payload: {\n            currentUser: user\n        }\n    }\n}\n\nexport const clearUser = () => {\n    return {\n        type: actionTypes.CLEAR_USER\n    }\n}"],"sourceRoot":""}